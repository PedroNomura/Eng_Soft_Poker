<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesas Online</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="mesas-online">
        <h1>Mesas Online</h1>
        <div id="mesas-container">
            <!-- Mesas serão carregadas dinamicamente aqui -->
        </div>
        <button class="criar-mesa">Selecione uma mesa</button>
    </div>

    <script>
        // Função para carregar as mesas a partir do backend
        async function carregarMesas() {
            const response = await fetch('http://127.0.0.1:5000/listar_salas');
            const mesas = await response.json();
            const mesasContainer = document.getElementById('mesas-container');
            mesasContainer.innerHTML = ''; // Limpa o container

            mesas.forEach((mesa, index) => {
                const mesaDiv = document.createElement('div');
                mesaDiv.classList.add('mesa-item');
                mesaDiv.setAttribute('onclick', `abrirMesa(${index + 1})`);
                
                mesaDiv.innerHTML = `
                    <span>${mesa.nome}</span>
                    <span>${mesa.jogadores} players</span>
                    <span>Blinds ${mesa.small_blind}/${mesa.big_blind}</span>
                `;

                mesasContainer.appendChild(mesaDiv);
            });
        }

        // Chama a função de carregar mesas assim que a página é carregada
        window.onload = carregarMesas;

        function abrirMesa(mesaId) {
            window.location.href = `mesa.html?mesaId=${mesaId}`;
        }
    </script>
</body>
</html>
